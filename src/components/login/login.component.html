<div class="flex items-center justify-center min-h-screen bg-gray-50 font-sans p-4 relative overflow-hidden">
  
  <!-- Background Decorations -->
  <div class="absolute top-0 left-0 w-64 h-64 bg-teal-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
  <div class="absolute top-0 right-0 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

  <!-- Main Login Card -->
  <div class="bg-white/90 backdrop-blur-xl rounded-[3rem] shadow-2xl w-full max-w-[480px] p-8 relative overflow-hidden transform transition-all hover:shadow-3xl z-10 border border-white/50">
    <!-- Top Gradient Line -->
    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 via-teal-500 to-emerald-400"></div>

    <div class="flex flex-col items-center mt-4">
        <!-- Logo -->
        <div class="mb-4">
             <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-200/50">
                <i class="fas fa-graduation-cap text-3xl text-white"></i>
            </div>
        </div>

        <!-- MASSIVE CLOCK SECTION -->
        <div class="w-full text-center mb-8 relative">
            <p class="text-sm text-gray-400 font-bold uppercase tracking-[0.3em] mb-2">{{ greeting() }}</p>
            
            <!-- The Clock -->
            <div class="relative z-10">
                <div class="text-6xl sm:text-7xl leading-none font-black text-transparent bg-clip-text bg-gradient-to-b from-gray-800 to-gray-600 font-mono tracking-tighter drop-shadow-sm select-none">
                    @if (realtimeClock()) {
                      {{ realtimeClock() }}
                    } @else {
                      <span class="text-5xl sm:text-6xl">--:--:--</span>
                    }
                </div>
                <!-- Seconds (Smaller) -->
                <!-- Note: Seconds are usually distracting in a huge clock, keeping it clean or adding small -->
            </div>

            <div class="mt-4 inline-flex items-center px-6 py-2 bg-gray-100/80 rounded-full border border-gray-200 backdrop-blur-sm">
                <i class="far fa-calendar-alt mr-3 text-teal-600"></i>
                <p class="text-lg font-bold text-gray-600 tracking-wide">
                    {{ currentDate() }}
                </p>
            </div>
        </div>

        <!-- RELEVANT INFO / RUNNING TEXT -->
        <div class="w-full bg-blue-50/50 border border-blue-100 rounded-2xl p-4 mb-8 relative overflow-hidden group">
            <div class="flex items-center gap-3 mb-2">
                 <span class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></span>
                 <h3 class="text-xs font-black text-blue-800 uppercase tracking-widest">Informasi Sekolah</h3>
            </div>
            
            <!-- Marquee Container -->
            <div class="relative h-12 overflow-hidden w-full bg-white rounded-xl border border-blue-100 shadow-inner flex items-center px-4">
                <div class="animate-marquee whitespace-nowrap flex gap-8 items-center text-gray-600 font-medium text-sm">
                    <span><i class="fas fa-bullhorn text-teal-500 mr-2"></i> Pembayaran SPP Bulan Ini Paling Lambat Tanggal 10.</span>
                    <span><i class="fas fa-info-circle text-blue-500 mr-2"></i> Harap simpan bukti pembayaran fisik.</span>
                    <span><i class="fas fa-calendar-check text-orange-500 mr-2"></i> Ujian Semester Ganjil dimulai 20 Mei 2024.</span>
                    <span><i class="fas fa-phone-alt text-green-500 mr-2"></i> Kendala Login? Hubungi TU (0812-3456-7890).</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Form -->
    <form (ngSubmit)="handleLogin()">
        <div class="mb-6">
            <label for="username" class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 text-center">Login Siswa / Petugas</label>
            <div class="relative group">
                <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none z-10">
                   <i class="fas fa-user text-gray-400 text-xl group-focus-within:text-blue-600 transition-colors"></i>
                </div>
                
                <input 
                  type="text" 
                  id="username" 
                  name="username"
                  class="w-full pl-14 pr-6 py-5 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:outline-none focus:bg-white focus:ring-4 focus:ring-blue-100 focus:border-blue-500 font-bold text-gray-800 placeholder-gray-300 transition-all text-xl" 
                  placeholder="Masukkan NIS / ID" 
                  required
                  autocomplete="off"
                  [disabled]="isLoading() || showWelcome()"
                  [(ngModel)]="username">
            </div>
        </div>

        @if (loginError()) {
          <div class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-r-xl mb-6 text-sm flex items-center animate-shake shadow-sm" role="alert">
            <i class="fas fa-exclamation-circle mr-3 text-lg"></i>
            <span class="font-medium">{{ loginError() }}</span>
          </div>
        }

        <button 
          type="submit"
          class="w-full bg-gray-900 hover:bg-black text-white font-bold py-5 rounded-2xl shadow-xl shadow-gray-300 transition-all transform active:scale-[0.98] flex items-center justify-center gap-3 disabled:bg-gray-400 disabled:cursor-not-allowed group relative overflow-hidden"
          [disabled]="isLoading() || !username() || showWelcome()">
            
            @if (isLoading()) {
              <div class="absolute inset-0 flex items-center justify-center bg-gray-800 z-20">
                 <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
              </div>
            } 
            
            <span class="text-lg tracking-wide">MASUK APLIKASI</span>
            <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center group-hover:translate-x-2 transition-transform">
                 <i class="fas fa-arrow-right text-white text-sm"></i>
            </div>
        </button>
    </form>

    <!-- Footer -->
    <div class="mt-8 text-center flex justify-center gap-4 opacity-50">
       <i class="fab fa-google text-gray-400 text-xl hover:text-blue-500 transition cursor-pointer" title="Connected to Google Sheets"></i>
       <i class="fas fa-shield-alt text-gray-400 text-xl hover:text-green-500 transition cursor-pointer"></i>
    </div>
  </div>

  <!-- Welcome Overlay Modal -->
  @if (showWelcome()) {
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900/60 backdrop-blur-md animate-fade-in">
        <div class="bg-white rounded-[2.5rem] p-10 shadow-2xl flex flex-col items-center justify-center animate-scale-up max-w-sm w-full mx-4 text-center relative overflow-hidden">
            <!-- Confetti bg decoration (static for now) -->
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 to-blue-500"></div>

            <div class="w-24 h-24 bg-green-50 rounded-full flex items-center justify-center mb-6 animate-bounce shadow-inner">
                <i class="fas fa-check text-5xl text-green-500"></i>
            </div>
            <h2 class="text-3xl font-black text-gray-800 mb-2 tracking-tight">Akses Diterima</h2>
            
            <div class="bg-gray-50 px-8 py-6 rounded-2xl border border-gray-100 w-full mt-4 shadow-inner">
                <p class="text-gray-900 font-extrabold text-2xl mb-1">{{ authService.currentUser()?.name }}</p>
                <span class="inline-block px-3 py-1 bg-teal-100 text-teal-700 rounded-lg text-xs font-black uppercase tracking-widest border border-teal-200">
                    {{ authService.currentUser()?.role }}
                </span>
            </div>
            
            <div class="mt-8 w-full bg-gray-100 h-2 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-teal-400 to-blue-500 animate-progress w-full"></div>
            </div>
            <p class="text-xs text-gray-400 mt-3 font-bold uppercase tracking-widest">Memuat Dashboard...</p>
        </div>
    </div>
  }
</div>